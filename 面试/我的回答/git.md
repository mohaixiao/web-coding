### [Git - Book](https://git-scm.com/book/zh/v2)

### git 如何实现回滚操作？

- [ ]

在本地仓库中使用 git reset 命令

1. 在要回滚的本地分支上执行 `git log` 命令，查看最近的提交记录，并找到要回滚到的目标提交的哈希值。
2. 执行 `git reset --hard 目标提交的哈希值` 命令，该命令会将分支 HEAD 指针移到目标提交的位置，同时将本地代码库的工作区和暂存区恢复到目标提交的状态。这个操作相当于强制覆盖当前分支上的代码，所以需要谨慎操作。
3. 如果已经将本地分支上的代码 push 到了远程仓库中，则需要使用 `git push -f` 命令来将本地分支强制推送到远程分支上覆盖原有的提交记录。

需要注意的是，对于已经推送到远程仓库的代码进行回滚是比较危险的操作，因为它会覆盖所有人的代码。如果要对远程仓库进行回滚操作，建议提前备份并通知其他团队成员。

[git 实现回滚](https://cloud.tencent.com/developer/article/1582800) 。

### 说一说-f 的作用， reset 和 revert 有什么区别，给定场景 a,b,c 三个版本，用具体的命令实现回滚？为什么会发生冲突？冲突是怎么解决的？提到回退版本（revert 和 reset），这两个命令的区别

`git push -f` 的作用是将本地仓库的代码强制推送到远程仓库，会导致之前的提交记录都会被覆盖。这个命令应该谨慎使用，只有在个人仓库或者 team 之间协作时某些误操作需要进行回滚时才应该使用。

在 Git 中，`git reset` 和 `git revert` 都可以用来回滚代码。它们的区别在于对历史版本的处理方式不同。

- `git reset`  会移动 HEAD 指针到某个指定的提交，将当前工作目录的内容恢复成这个提交的内容。同时，如果使用  `--hard`  参数，那么 Git 会彻底删除之前的提交记录，让之前的记录“消失”。
- `git revert`  会创建一个新的提交，作为之前某次提交的反向操作，撤销之前提交的变更。同时，不会修改历史记录，不会删除之前提交，而是新增一个反向的提交。

下面给出三种场景下具体的回滚命令：

- 场景 A：回滚到最近一次提交

  shellCopy Code

  `git reset --hard HEAD~1 git push -f`
- 场景 B：回滚到某个特定的提交

  shellCopy Code

  `git reset --hard <commit-id> git push -f`
- 场景 C：撤销某次提交，创建一个新的提交

  shellCopy Code

  `git revert <commit-id> git push`

以上命令会在本地进行操作，如果需要将回滚操作同步到远程仓库需要使用 `git push` 命令。

这里的知识来源为：

- [[1](https://segmentfault.com/a/1190000038436305)] 关于  `git push -f`  命令的说明；
- [[2](https://zhuanlan.zhihu.com/p/412482122)] `git reset`  和  `git revert`  的区别及使用场景。

### 写项目的时候，常用的 git 操作的流程是什么？

1. 手动解决冲突后，远程分支的内容就被修改了，之后再 pull，可能会出现脏数据，遇到过吗？

[git 最详细的操作流程*git 操作流程*龍大大少的博客-CSDN 博客](https://blog.csdn.net/weixin_45620619/article/details/124618872)

### git 的常用操作

### 将当前缓存区的文件提交到本地仓库，应该怎么提交?

在 Git 中，将当前缓存区的文件提交到本地仓库可以通过以下命令实现：

```bash
git commit -m "commit message"
```

其中，`-m` 选项后面需要跟一段提交信息（commit message），它描述了本次提交的内容。提交信息应该简明扼要、准确明确，体现出具体更改的内容、原因及其影响等信息。

下面是具体的操作步骤：

1. 首先确认当前所在的 Git 仓库目录，并检查已经添加到缓存区的代码文件。

   ```bash
   git status
   ```

   如果有未被缓存或提交的文件，在提交前需要先使用 `git add` 命令将它们添加到缓存区。如：

   ```bash
   git add <filename>
   ```
2. 然后使用 `git commit` 命令将缓存区中的文件提交到本地仓库。如：

   ```bash
   git commit -m "Commit message"
   ```

   在双引号中填写本次提交的信息，建议填写有意义的、清晰的信息，以方便其他团队成员或自己查看历史提交记录时能够快速准确地了解这次提交的目的和内容。
3. 最后，使用 `git log` 命令查看提交记录，以确认是否提交成功。如：

   ```bash
   git log
   ```

   `git log` 命令会列出所有提交的记录，包括提交时的信息、时间、作者等详细信息，以及每次提交的 SHA-1 校验和。

通过以上步骤，就可以将当前缓存区的文件提交到本地仓库中了。注意，这个提交只是将变更保存在了本地仓库，如果想要将这些变更提交到远程仓库，还需要使用 `git push` 命令。

### 如何新建一个分支

在 Git 中，我们可以通过 `git branch` 命令来新建一个分支。具体的操作步骤如下所示：

1. 首先确认当前所在的分支。

   可以使用以下命令查看当前所在的分支：

   ```bash
   git branch
   ```
   当前所在的分支会被标记为星号（\*）。
2. 然后，使用 `git branch` 命令创建新的分支，并切换到该分支。语法如下：

   ```bash
   git branch <branch-name>
   git checkout <branch-name>
   ```
   其中，`<branch-name>` 是新分支的名称。以上两条命令也可以合并成一条命令，即：

   ```bash
   git checkout -b <branch-name>
   ```
   这条命令会同时创建并切换到新分支。
3. 接着，可以在新分支上进行开发工作。在分支上进行修改和提交时，只会影响到当前所在的分支，不会影响到其他分支和代码库。
4. 当在新分支上完成开发工作后，可以将这些变更合并回主分支或其他分支中。在合并前需要先提交新分支上的变更到本地仓库。

   使用以下命令提交变更：

   ```bash
   git add .
   git commit -m "commit message"
   ```
   其中，`.` 表示提交所有变更，`-m` 后面指定提交信息。
5. 最后，可以使用 `git merge` 命令将新分支合并回目标分支。语法如下：

   ```bash
   git checkout <target-branch>
   git merge <branch-name>
   ```
   其中，`<target-branch>` 是目标分支，`<branch-name>` 是要合并的分支。`git merge` 命令会将 `<branch-name>` 分支上的变更合并到 `<target-branch>` 分支上。如果合并过程中发生冲突，需要手动解决冲突后再次提交变更。
